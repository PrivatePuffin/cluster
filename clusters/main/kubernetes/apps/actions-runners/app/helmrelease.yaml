# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/helm.toolkit.fluxcd.io/helmrelease_v2.json
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: actions-runners
    namespace: gha
spec:
    interval: 30m
    chart:
        spec:
            chart: gha-runner-scale-set
            version: 0.10.1
            sourceRef:
                kind: HelmRepository
                name: actions-runner-controller
                namespace: flux-system
    install:
        remediation:
            retries: 3
    upgrade:
        remediation:
            strategy: rollback
            retries: 3
    dependsOn:
        - name: actions-runner-controller
          namespace: gha
    values:
        minRunners: 6
        maxRunners: 24
        githubConfigSecret:
            github_app_id: ENC[AES256_GCM,data:IphxBKzEmc22AWUypefzmIxpGWqyUeII9Tgor/gdYi4mKluaJ/ECS88=,iv:i9mfTYRyNxfcuJvNu2M2+VYatjrmg77pDeBpQzv+M8E=,tag:2fBvRVi2u5LYKa/N9B+EFQ==,type:str]
            github_app_installation_id: ENC[AES256_GCM,data:heRy6wrZB4I=,iv:TrEd/nBi6/O6WmroZlIAQWrU/SwSj+cEqPybD4T7S0w=,tag:qb2qy5le+10ScubJpdkbfQ==,type:str]
            github_app_private_key: ENC[AES256_GCM,data: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,iv:P56UbVXjGB7ps1n6w6KGLXNL+/V8dh6Y3XN/VHxp6g8=,tag:wIIetPIaraxJfj1+n1hmpA==,type:str]
        githubConfigUrl: https://github.com/truecharts
        controllerServiceAccount:
            name: actions-runner-controller
            namespace: gha
        containerMode:
            type: kubernetes
            kubernetesModeWorkVolumeClaim:
                accessModes:
                    - ReadWriteOnce
                storageClassName: openebs-hostpath
                resources:
                    requests:
                        storage: 32Gi
        template:
            spec:
                containers:
                    - name: runner
                      image: tccr.io/tccr/charts-ci:latest
                      command:
                        - /home/runner/run.sh
                      env:
                        - name: ACTIONS_RUNNER_REQUIRE_JOB_CONTAINER
                          value: "false"
sops:
    shamir_threshold: 3
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1uzy27yg04slm0t4naapemy207fd7uh4lda70dxnh932e5dd8n55skgcdrq
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBpQnhkMnM5b3l1OHQzR0g0
            ZEFEVUdiUWc3cm1JRzA0MG9pN1c4NU5qazN3CjdxcmF2bEkzNEFPMlNwWWpJVFMw
            TEtxTnlPOXFhTGRVRkgzSUdaOFF6WVEKLS0tIGhzOW5kQnNhZU9wSFJrVzQzUkdw
            UmU3czF0bnVNMFlIbFlVNHZWdU1MK28KF1SKg8lDgNRedpT8In/hC/J7G7PIgqGI
            fY5dLT1TEe8TGfqjt5u3vpnOl7cyi1dlHCHbXfUQpNwDOqowICuXpA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-01-31T17:28:37Z"
    mac: ENC[AES256_GCM,data:H22mOP+a/Ac5hxI2VRUq6IiEyWel+uL9fT6xoTKZQmE8Kq56IsfWChpbahQ/Uxm8uoConjyKzDM4ZTLCF6vPODUOBBl0arbYuUaWU5X2fiFGtQibrldUjQ6VGLkQjZ7AcDc0aNDKhWwo+FM3D+5jwpb3atA0MXNhC3dTGFXRuPA=,iv:yZTEnRI4aOFI++bsYceGcPwepqPf80iY0I8LXT2VatA=,tag:GftYxPotiHDATOJx8IBGFg==,type:str]
    pgp: []
    encrypted_regex: ((?i)(displayname|email|pass|ca|id|bootstraptoken|secretboxencryptionsecret|secrets|secrets|password|cert|secret($|[^N])|key|token|^data$|^stringData))
    version: 3.9.2
