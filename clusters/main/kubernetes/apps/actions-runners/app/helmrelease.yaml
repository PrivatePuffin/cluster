# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/helm.toolkit.fluxcd.io/helmrelease_v2.json
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: actions-runners
    namespace: gha
spec:
    interval: 30m
    chart:
        spec:
            chart: gha-runner-scale-set
            version: 0.10.1
            sourceRef:
                kind: HelmRepository
                name: actions-runner-controller
                namespace: flux-system
    install:
        remediation:
            retries: 3
    upgrade:
        remediation:
            strategy: rollback
            retries: 3
    dependsOn:
        - name: actions-runner-controller
          namespace: gha
    values:
        minRunners: 6
        maxRunners: 24
        githubConfigSecret:
            github_app_id: ENC[AES256_GCM,data:LEtG914Blwhy972WTOtPCmoJWNBNiVAMCggwFzxg6TCEUPp4yuYt2Vs=,iv:Q43eub7BFVPozPNrFAoaQG1CMWW3C2yfjztTFUzQv5o=,tag:B0nplmd9gLwHr6H3e7cdVA==,type:str]
            github_app_installation_id: ENC[AES256_GCM,data:xXYYsJKzroY=,iv:zJAnKF68dtRslBCIInG7r5D7gW2a2vfvFMUctA3war4=,tag:e1pC083EjJQBrErB2T5rTw==,type:str]
            github_app_private_key: ENC[AES256_GCM,data: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,iv:NQEpOklbWvEmsFmk0aM5pwLfRaO86vdb0qRbUISoibc=,tag:k43uJZtWPcxXcetFKGk+lw==,type:str]
        githubConfigUrl: https://github.com/truecharts
        controllerServiceAccount:
            name: actions-runner-controller
            namespace: gha
        containerMode:
            type: kubernetes
            kubernetesModeWorkVolumeClaim:
                accessModes:
                    - ReadWriteOnce
                storageClassName: openebs-hostpath
                resources:
                    requests:
                        storage: 32Gi
        template:
            spec:
                containers:
                    - name: runner
                      image: tccr.io/tccr/charts-ci:latest
                      command:
                        - /home/runner/run.sh
                      env:
                        - name: ACTIONS_RUNNER_REQUIRE_JOB_CONTAINER
                          value: "false"
sops:
    shamir_threshold: 3
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1uzy27yg04slm0t4naapemy207fd7uh4lda70dxnh932e5dd8n55skgcdrq
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBlMUIvL0hYeUwvSloyT2pJ
            bUllY05KYlNqdGlLWVArMlNveDhKSVV3VzBZCldJSWYyNmhXUS8xa1RrVXRoNFE5
            YkdWelkxd1lwaVAvYWhKMnVtT0YwWmMKLS0tIG8zdHZhT3ZLbEJRQmpLbDRvS3dl
            QjQyR2dyUGhtckVZTjJqWFFFYldYTm8KdRLttimp1XOVkVdSDbkfjSyvCTd9PUM7
            SGEtqaNxBsatHFVzBJf8tF23ynYCFI3D+tevmWHH9F3pe25UgwMxGA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-01-31T18:10:26Z"
    mac: ENC[AES256_GCM,data:t4F1v/rT8UZIOGtulnFZ2H6YQCgLXKEyAvhfN8NC0EJNWdKATyNSd9KT5RNDbZKE4/VOBt3TBrZIpH6YaPrCaTni+XU5nw9lIYXo7bigGKD5kYej/vj8ZhbVKt9UO5ZWUVzKzmdJgl8UZJjxEFVPXf5s1NTdl8goqOtzTmOUEIk=,iv:9ByWVv84PhbcvUTIX+8G28maRo0+mnT/sslAOMBEq+k=,tag:OXgL3jJovaQtb3D4+NGRAg==,type:str]
    pgp: []
    encrypted_regex: ((?i)(displayname|email|pass|ca|id|bootstraptoken|secretboxencryptionsecret|secrets|secrets|password|cert|secret($|[^N])|key|token|^data$|^stringData))
    version: 3.9.2
