# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/helm.toolkit.fluxcd.io/helmrelease_v2.json
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: actions-runners
    namespace: gha
spec:
    interval: 30m
    chart:
        spec:
            chart: gha-runner-scale-set
            version: 0.10.1
            sourceRef:
                kind: HelmRepository
                name: actions-runner-controller
                namespace: flux-system
    install:
        remediation:
            retries: 3
    upgrade:
        remediation:
            strategy: rollback
            retries: 3
    dependsOn:
        - name: actions-runner-controller
          namespace: gha
    values:
        minRunners: 6
        maxRunners: 24
        githubConfigSecret:
            github_app_id: ENC[AES256_GCM,data:iIUu1Cy7bA2hH8/3X77KN9MObsO82B/dmImUfdC4f8hbGbNotpFd0Go=,iv:Qe5jIb0QNoXz3OGZ7oLHNt6FR/PfXJXZo9R4ZldEJpY=,tag:jG4CmsIjQyuIpY58ubKGng==,type:str]
            github_app_installation_id: ENC[AES256_GCM,data:cprCgJDfxCw=,iv:aVvPKovH1Nc48Jt6K4j0Yr3N7SkktSkLQLuAlqAy2QI=,tag:pOJuJj0ZRHVs4dPHbA9OLA==,type:str]
            github_app_private_key: ENC[AES256_GCM,data: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,iv:mGARX7pTh45EMVRvSw88GYmkwvBWERIdRwhQWfFlvFw=,tag:bisKVQRv8yLcmvMeaYiMOg==,type:str]
        githubConfigUrl: https://github.com/truecharts
        controllerServiceAccount:
            name: actions-runner-controller
            namespace: gha
        containerMode:
            type: kubernetes
            kubernetesModeWorkVolumeClaim:
                accessModes:
                    - ReadWriteOnce
                storageClassName: openebs-hostpath
                resources:
                    requests:
                        storage: 32Gi
        template:
            spec:
                containers:
                    - name: runner
                      image: tccr.io/truecharts/charts-ci:latest
                      command:
                        - /home/runner/run.sh
                      env:
                        - name: ACTIONS_RUNNER_REQUIRE_JOB_CONTAINER
                          value: "false"
sops:
    shamir_threshold: 3
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1uzy27yg04slm0t4naapemy207fd7uh4lda70dxnh932e5dd8n55skgcdrq
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBSU3p3bDJNSFZNRGoxYWdk
            VVV3ZUJwY2hvbXZ0bFpLZ2grYXVzbm5CR0VVCjV2ZnhnMXZmbG1Cd09hQ2xqTFRS
            S04zY0lVUUpLN1B0bTlrM3hic2k1c2MKLS0tIDU2Y3B4aGQrdkFvSUp3MTRoU2U5
            eHM4eDlvVEc4QTE3ZnRFeUVsQ2xadTgKHuIM1XjkbCTYOaqqcocJwl8gpM88jOWi
            71i7R5bx7wcrwVJkXOBYmcNb8pUksvTpDWMn9Cu47EDqgf30W8+IQg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-01-23T19:54:51Z"
    mac: ENC[AES256_GCM,data:FDgjEvbT2+dvdw8xk6wy/b2TtPldhKWPoLoW5vvZrR6/W7X/hY5F1L6BclvMdKROOq3LXopacg8E9dlLSZPx9emYnFRz6zL7z7kZmnJe7w+QF9JvdyFLJeCA/Qpxp2rEmVrB3kHz/DYRdl5AT5qGlmjB5tdqdI4kVYkG0TcaGsM=,iv:kjIlF5vbIIEZ3m3C2Qbp8/zmEl7oDDiJlzYPZQBTluE=,tag:lEG8uOwVUS/sah34ZgBu+w==,type:str]
    pgp: []
    encrypted_regex: ((?i)(displayname|email|pass|ca|id|bootstraptoken|secretboxencryptionsecret|secrets|secrets|password|cert|secret($|[^N])|key|token|^data$|^stringData))
    version: 3.9.2
