# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/helm.toolkit.fluxcd.io/helmrelease_v2.json
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: actions-runners
    namespace: gha
spec:
    interval: 30m
    chart:
        spec:
            chart: gha-runner-scale-set
            version: 0.10.1
            sourceRef:
                kind: HelmRepository
                name: actions-runner-controller
                namespace: flux-system
    install:
        remediation:
            retries: 3
    upgrade:
        remediation:
            strategy: rollback
            retries: 3
    dependsOn:
        - name: actions-runner-controller
          namespace: gha
    values:
        minRunners: 6
        maxRunners: 24
        githubConfigSecret:
            github_app_id: ENC[AES256_GCM,data:cYFex/JCuN2s14DTTbZ1ZVdxks4RkwSx8mH9cPOJDBIcAurJqhJYoxM=,iv:2pbbNGvfNthfNSDov1HCdfr3XJIrx/lR5w7zDtX9/Ik=,tag:D51sa2rSBC5Ejmkb6G/fXA==,type:str]
            github_app_installation_id: ENC[AES256_GCM,data:fbn2Zqdfrrc=,iv:PkQfN9ZJw9z3/FPShIogvErrfWwVLlPQJlviuRlifeM=,tag:nIIxeJ3PLBGRJCa8Ej6AfQ==,type:str]
            github_app_private_key: ENC[AES256_GCM,data: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,iv:B516vA+tF3M81sIK50URWiUWVD1eAWsnlRYy6eRuF3A=,tag:OO2uqZQkAMXT5iglQJsICQ==,type:str]
        githubConfigUrl: https://github.com/truecharts
        controllerServiceAccount:
            name: actions-runner-controller
            namespace: gha
        containerMode:
            type: kubernetes
            kubernetesModeWorkVolumeClaim:
                accessModes:
                    - ReadWriteOnce
                storageClassName: openebs-hostpath
                resources:
                    requests:
                        storage: 32Gi
        template:
            spec:
                containers:
                    - name: runner
                      image: tccr.io/tccr/charts-ci:latest
                      command:
                        - /home/runner/run.sh
                      env:
                        - name: ACTIONS_RUNNER_REQUIRE_JOB_CONTAINER
                          value: "false"
sops:
    shamir_threshold: 3
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1uzy27yg04slm0t4naapemy207fd7uh4lda70dxnh932e5dd8n55skgcdrq
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBCbVJ5bnBaSDMwcW1uUUxa
            K3NieXdmZ2xOWWpldWNHSS9CZlk1YUNFOFdRCnNtVEUvUVpIVFdNdXhFS1IxLzUr
            N3BWM3NTTjFxTmFiU1Q3K1U5OGFycUkKLS0tIHdseXJYc0lYY09BdmU1U0hUTVJN
            RFA0NmhnaWVaRnRBaFB2czFqSm5MVlkK2N9JT3ReMRY5tF4nSNpjgDLk1QQVe3wD
            acnImDQtiHjrTTopRZykZpSsWeX/2w08TQPHJL+woBCu30+QK1V66Q==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-03-10T14:43:33Z"
    mac: ENC[AES256_GCM,data:pkV6IuyDyywnC231AyWAcU37YlJuLjuKvJ6iCDUS0XkwXLXh2bLszJC4nZPW6FyWR8hVwc7W3zw9fl80YenHktNDOlXcWPbTcsNWUTbwzUkHD90tZceBzLWPUfYd2JWa4fvj6P2hfu/FYmW/AF3s2klkhLwKQIDI2qgTrTeFSt4=,iv:WmK6KHW3Oj0c0pc1DDqbVl7Y5DlrcH2xqj8EM18bq+8=,tag:xt0XSFB9/uITb9iSnpfrTg==,type:str]
    pgp: []
    encrypted_regex: ((?i)(displayname|email|pass|ca|id|bootstraptoken|secretboxencryptionsecret|secrets|secrets|password|cert|secret($|[^N])|key|token|^data$|^stringData))
    version: 3.9.2
