# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/helm.toolkit.fluxcd.io/helmrelease_v2.json
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: actions-runners
    namespace: gha
spec:
    interval: 30m
    chart:
        spec:
            chart: gha-runner-scale-set
            version: 0.10.1
            sourceRef:
                kind: HelmRepository
                name: actions-runner-controller
                namespace: flux-system
    install:
        remediation:
            retries: 3
    upgrade:
        remediation:
            strategy: rollback
            retries: 3
    dependsOn:
        - name: actions-runner-controller
          namespace: gha
    values:
        minRunners: 6
        maxRunners: 24
        githubConfigSecret:
            github_app_id: ENC[AES256_GCM,data:NpXfW0RXxtfJKeguZkuiyDsZAhMlLe2T9Xwf5bxHXakXUHIhxAzcTpY=,iv:nsP+VrAMw6DlHk69ds8+f8IAeDAI9niga9gFdbjlBLs=,tag:zAlLZ7HeEnDYrJ6tr/trsA==,type:str]
            github_app_installation_id: ENC[AES256_GCM,data:eIksSQ9pifs=,iv:G25mrCg9DSnGRkjkdIbCB9ugd9dGiPrh6bMuH7V9opk=,tag:N3+m4VthcZtcqp0P0q6NvQ==,type:str]
            github_app_private_key: ENC[AES256_GCM,data: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,iv:7x27DpEIDQb9N0uZ9wOkgy3ypnR/HSFrdAmLmH/rXik=,tag:uYXHMyOdMZ+6v5p487517g==,type:str]
        githubConfigUrl: https://github.com/truecharts
        controllerServiceAccount:
            name: actions-runner-controller
            namespace: gha
        containerMode:
            type: kubernetes
            kubernetesModeWorkVolumeClaim:
                accessModes:
                    - ReadWriteOnce
                storageClassName: openebs-hostpath
                resources:
                    requests:
                        storage: 32Gi
        template:
            spec:
                containers:
                    - name: runner
                      image: tccr.io/tccr/charts-ci:latest
                      command:
                        - /home/runner/run.sh
                      env:
                        - name: ACTIONS_RUNNER_REQUIRE_JOB_CONTAINER
                          value: "false"
sops:
    shamir_threshold: 3
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1uzy27yg04slm0t4naapemy207fd7uh4lda70dxnh932e5dd8n55skgcdrq
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBWQXlZb2RjOSt4M2NTSFdB
            OFZORzJUR2J0YlljUnlpN1dFK0QwQlpGWnpRClN0Sy9RaSthcXkvWWlEOWN5dUNx
            UGpWVXhwZCtoaGVSTlN6a2EvNXE3c0UKLS0tIDFGa2R4STU1RXY5UjEyWkhxSWs1
            dVR5MnMwcmgrNWhoTUdBZ2FnK0RhYzgKAMrkg9HXPcVVKXDJsEdDYlL15vYhHlnE
            0JcGiYETB5qTnF4YOeBhnvD/0gE2v4m3YI1/1mewVAcYCOhCnnXMEw==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-01-31T18:19:16Z"
    mac: ENC[AES256_GCM,data:NmoYmCjaRvS92cL/ZLrDwU48DGEGJX9t1XTl4eP7vYG1zIIbYRYLJvqHmn4FxaOPNnLegaJuaCkMLuMC6QacOWnBi91wDq4gzqTYd8mHAjwvuRR/UDkpXtlJ6Yt6/K9H00aLiA9p+7x+0crmo+lxbbpEM7QLVvYKvb17OElcgNU=,iv:kvRqB4fmw4XTZ+Pu4Ipi2SzhvMHSOeCdRDDLxDUE4FA=,tag:2OTv/BlrxeR5LYqrB2F4bA==,type:str]
    pgp: []
    encrypted_regex: ((?i)(displayname|email|pass|ca|id|bootstraptoken|secretboxencryptionsecret|secrets|secrets|password|cert|secret($|[^N])|key|token|^data$|^stringData))
    version: 3.9.2
