# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/helm.toolkit.fluxcd.io/helmrelease_v2.json
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: actions-runners
    namespace: gha
spec:
    interval: 30m
    chart:
        spec:
            chart: gha-runner-scale-set
            version: 0.10.1
            sourceRef:
                kind: HelmRepository
                name: actions-runner-controller
                namespace: flux-system
    install:
        remediation:
            retries: 3
    upgrade:
        remediation:
            strategy: rollback
            retries: 3
    dependsOn:
        - name: actions-runner-controller
          namespace: gha
    values:
        minRunners: 6
        maxRunners: 24
        githubConfigSecret:
            github_app_id: ENC[AES256_GCM,data:DAwKbuH4Ssq9QkwqlKZrx5uj6ssB1B6axV8SfsjcDzCW40io9roLhgM=,iv:EwgXJZsXHMDMBXexg/kXA3hq2dP2mXfKheVI1rg+QS0=,tag:WXZp3u38hL3LlM85fLdC6Q==,type:str]
            github_app_installation_id: ENC[AES256_GCM,data:580Im3UsTbA=,iv:hiRnIepvxHVNVhtYzyd3ddhoHiceeiq4hCWw15Fc8Gk=,tag:kky4Ya9AnhjeMwH/xikQgQ==,type:str]
            github_app_private_key: ENC[AES256_GCM,data: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,iv:oBZMtUkMBpVzeBmsA3qYTX9p5QJfxqiozug4bEUFHXs=,tag:dLIqVC3t2zVV45O7pnw5Kg==,type:str]
        githubConfigUrl: https://github.com/truecharts
        controllerServiceAccount:
            name: actions-runner-controller
            namespace: gha
        containerMode:
            type: kubernetes
            kubernetesModeWorkVolumeClaim:
                accessModes:
                    - ReadWriteOnce
                storageClassName: openebs-hostpath
                resources:
                    requests:
                        storage: 32Gi
        template:
            spec:
                containers:
                    - name: runner
                      image: tccr.io/tccr/charts-ci:latest
                      command:
                        - /home/runner/run.sh
                      env:
                        - name: ACTIONS_RUNNER_REQUIRE_JOB_CONTAINER
                          value: "false"
sops:
    shamir_threshold: 3
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1uzy27yg04slm0t4naapemy207fd7uh4lda70dxnh932e5dd8n55skgcdrq
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBhUVBlZ1JHYWxBUkFVLzk1
            cExiYzdZQ0NTdmpWOFNMdithZjZ4Uk05eUFjCm9lWWtJWWp0TTFFZ3lSZkxDNFZT
            K3NpdUE3NTBraTdlUVZteFNFWWcyTTgKLS0tIGhWeHEvRW03bzhDLzRka3BlMjcz
            Yy9mUXUyNGNwVytVaGROK3BDbDY1bU0K0sg7W/HmHLswi3b0DZVOfbcfjldLOPY3
            9jCUAhGZgkwnatKl5asd8bswK1hsXjU3rNs6v7sAh7D5y4EMtCV6/Q==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-01-31T18:16:45Z"
    mac: ENC[AES256_GCM,data:WEguj2YrTtxS6Fa4XD+Vv1vsJnSIsTxVOmR1ueUtJzdATASW+8QPRj8f7SYqDLps8Y3UbmexuhdPuL/JYPMExZPBkeAy2cGAACgfRQXA5zcS1Vv+qgfTej9jO+2PQI+EZnozuaYu13RS5uw467+v91S5jtjjLQrHLlDqJ67cJcI=,iv:YqlyhbDB75Z2iUEDGra7LPEbXXxoCo7wDAFJlubOu18=,tag:3TVvofTeCvi2G5D2SzHY9Q==,type:str]
    pgp: []
    encrypted_regex: ((?i)(displayname|email|pass|ca|id|bootstraptoken|secretboxencryptionsecret|secrets|secrets|password|cert|secret($|[^N])|key|token|^data$|^stringData))
    version: 3.9.2
