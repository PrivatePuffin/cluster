# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/helm.toolkit.fluxcd.io/helmrelease_v2.json
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: actions-runners
    namespace: actions-runners
spec:
    interval: 30m
    chart:
        spec:
            chart: gha-runner-scale-set
            version: 0.9.3
            sourceRef:
                kind: HelmRepository
                name: actions-runner-controller
                namespace: flux-system
    install:
        remediation:
            retries: 3
    upgrade:
        remediation:
            strategy: rollback
            retries: 3
    dependsOn:
        - name: actions-runner-controller
          namespace: actions-runner-controller
    values:
        nameOverride: ENC[AES256_GCM,data:YtC3s/A9bMPV7fCGBUKD,iv:F1gjeLwoz4Fk7AqY34QSJUgke7QVn86erAntpwu08Ag=,tag:9aO3WLSkg03hHV3ouv1m1Q==,type:str]
        runnerScaleSetName: ENC[AES256_GCM,data:l/8i6vVB/2Ph82Eu8Y07,iv:3u09HTerM9xtGoyHcOjHyAFE2SOSsp5Z+s/svjXho/E=,tag:Y1PqnJhv5VCIqUlerT8T8g==,type:str]
        minRunners: 3
        maxRunners: 12
        containerMode:
            type: dind
        githubConfigSecret:
            github_app_id: ENC[AES256_GCM,data:AciSYUg8escVDRjtXMWzHH3wAJy35jxeKzcyIgkWCUxb5HgMxVjg/PU=,iv:wfuNYBX/g9qUVzdUWqSjMCHWMy1UtHmsf4uaHQYus8c=,tag:8PK3E1BBjref/oDZeZYrAA==,type:str]
            github_app_installation_id: ENC[AES256_GCM,data:lSQSRqZwoDs=,iv:0uEwUh7i+1iGheIkTriP0h7oUFiUAa4dqdntsmBcr6k=,tag:avz/LpIKnvTMQaW8Czp4JA==,type:str]
            github_app_private_key: ENC[AES256_GCM,data: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,iv:RR2/DeV9P7LBNcF7f8syEyi6lug+HR4jkQD9dkmGohk=,tag:qeEiH4/sogASKVNh9ODvdQ==,type:str]
        githubConfigUrl: https://github.com/truecharts
        controllerServiceAccount:
            name: actions-runner-controller
            namespace: actions-runner-controller
        template:
            spec:
                containers:
                    - name: runner
                      image: ghcr.io/truecharts/charts-ci:latest@sha256:7541472ba15b8488c54651ef028cbfc286d9a0c72fc066500ae2c6cef60ba84b
                      command:
                        - /home/runner/run.sh
                    - name: dind
                      image: docker.io/docker:26.0.0-dind
                      args:
                        - dockerd
                        - --host=unix:///var/run/docker.sock
                        - --group=$(DOCKER_GROUP_GID)
                        - --registry-mirror=http://spegel-registry.kube-system.svc.cluster.local:5000
sops:
    shamir_threshold: 3
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1uzy27yg04slm0t4naapemy207fd7uh4lda70dxnh932e5dd8n55skgcdrq
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBQb09JL1l2NnJWVGwzTDND
            Rjg3L2pEL051eit5cFlrcDJ2K0g1Y1lkaHlzCjlTbHVRQ1M1Z1ZOWU12ZE1DMVJ3
            YmhtRHBpOXZVRVo5d09ZcVd1N0pPc1kKLS0tIHVxL3RaeVNWNzZjQ1IyVzNMNmFj
            WkNYWEJDY0U5VmVPNmwxUWxtbEwvVVEKLukKGNhY7/bxEMAp4qlKZOagIE6AijMO
            VEIs77rXAFZvGEu0emjb9FjOe+zbTh0iRz4nP3PXTDahC5BKG4Uxwg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-10-19T11:07:13Z"
    mac: ENC[AES256_GCM,data:UGAXa4qR9L4hdHl3hbAdzhNRXD7uxVWFvr4XkcuHmKmbvZwMJ6UAO2a1QVqnwrg1NChrRpB8l1qcyWwzb0ZrqzqarGJsd3ZLLHrYnwwWm1PRORczQGpITi97waq/sjn7EZk+t1YQOwjOD8JTPV4OAIXdeta9ghGkV0Y1XLDOd2s=,iv:sv0x+VhsHXi5LvKGVKtpcgUo3JRRfRLZhsdgU1o0Biw=,tag:CqDOPMbSiMYaPIoUf+vXTw==,type:str]
    pgp: []
    encrypted_regex: ((?i)(displayname|email|pass|ca|id|bootstraptoken|secretboxencryptionsecret|secrets|secrets|password|cert|secret($|[^N])|key|token|^data$|^stringData))
    version: 3.9.1
