# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/helm.toolkit.fluxcd.io/helmrelease_v2.json
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: actions-runners
    namespace: gha
spec:
    interval: 30m
    chart:
        spec:
            chart: gha-runner-scale-set
            version: 0.10.1
            sourceRef:
                kind: HelmRepository
                name: actions-runner-controller
                namespace: flux-system
    install:
        remediation:
            retries: 3
    upgrade:
        remediation:
            strategy: rollback
            retries: 3
    dependsOn:
        - name: actions-runner-controller
          namespace: gha
    values:
        minRunners: 6
        maxRunners: 24
        githubConfigSecret:
            github_app_id: ENC[AES256_GCM,data:1hglVWan0JwGPcH5WPLTrSQ1uZHe8WYDZDJfOojaN9m5bxB2rWkgi9k=,iv:s95NPQdgmDEmIaJ1C2Jn/868VsGJaokjAkCZBkJxA2o=,tag:PZ+KVskDoGtGFaiHOM+mqw==,type:str]
            github_app_installation_id: ENC[AES256_GCM,data:ur9QQC0wcIU=,iv:kIbx3Lyc9PXAgST7pWGSiHCnSEQB4QjICXoqs08ofis=,tag:01zOl2w7vHQuJpuivuKgww==,type:str]
            github_app_private_key: ENC[AES256_GCM,data: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,iv:3k4cShBS9D2YLjSmuYafgn5mUvxJjoOlustj0Cuht3Q=,tag:pAsmW77Fpf1+aACb0UfdJA==,type:str]
        githubConfigUrl: https://github.com/truecharts
        controllerServiceAccount:
            name: actions-runner-controller
            namespace: gha
        containerMode:
            type: kubernetes
            kubernetesModeWorkVolumeClaim:
                accessModes:
                    - ReadWriteOnce
                storageClassName: openebs-hostpath
                resources:
                    requests:
                        storage: 32Gi
        template:
            spec:
                containers:
                    - name: runner
                      image: tccr.io/tccr/charts-ci:latest
                      command:
                        - /home/runner/run.sh
                      env:
                        - name: ACTIONS_RUNNER_REQUIRE_JOB_CONTAINER
                          value: "false"
sops:
    shamir_threshold: 3
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1uzy27yg04slm0t4naapemy207fd7uh4lda70dxnh932e5dd8n55skgcdrq
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBoK2MzUm9SMFNEUHZXVUlj
            dUpMUXR1OUpkNWNVeUtKcjBpWmdadGp4azFVCkpXaTlBMi9zQWMrUHhrb1h5M3p2
            dzlDRm0xWS95NmtlSGFzc290dDE2ZmcKLS0tIEtWTUxLdnAwQ1QrTVpFekxpRkdx
            U2I0eGo4THYwdVJzMHNxeWRXMkpFajQKf5Y5ih/ZqbqBoaucjSVx+oMLm9jA643B
            5J0W64S84j9tjV8q91Y0oBmpt6KZaJpUr4w+D35O3QlGkuGliKA1Rw==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-02-02T22:37:41Z"
    mac: ENC[AES256_GCM,data:fI3gnwVPj1i9ox3C1hs0B7M4+Gh6uxxeJo305SkFDURBoEQHdoKXkR6/AT+xzpeSOLeAXYF34DsxIeaENMS/CJv3B5SVdZe9Y5+pHX2NRDh7jwXL43QyzmzWodiQl6Pwj+nkuGuFFSuSWtyCUQtGEz8HXlysfPm+raVnF9O8NTQ=,iv:8F/aUM4h548GnN+i1VHwZNKxL6XOoOhSkSkrSaDKTrg=,tag:r+XML3oL13uAnJyvYq5J1A==,type:str]
    pgp: []
    encrypted_regex: ((?i)(displayname|email|pass|ca|id|bootstraptoken|secretboxencryptionsecret|secrets|secrets|password|cert|secret($|[^N])|key|token|^data$|^stringData))
    version: 3.9.2
