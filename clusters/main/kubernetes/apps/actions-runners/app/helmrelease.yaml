# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/helm.toolkit.fluxcd.io/helmrelease_v2.json
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: actions-runners
    namespace: gha
spec:
    interval: 30m
    chart:
        spec:
            chart: gha-runner-scale-set
            version: 0.10.1
            sourceRef:
                kind: HelmRepository
                name: actions-runner-controller
                namespace: flux-system
    install:
        remediation:
            retries: 3
    upgrade:
        remediation:
            strategy: rollback
            retries: 3
    dependsOn:
        - name: actions-runner-controller
          namespace: gha
    values:
        minRunners: 6
        maxRunners: 24
        githubConfigSecret:
            github_app_id: ENC[AES256_GCM,data:zErtTAX+PRg4pq1SSBo/fzfWoM+0+xDLghIkwFuUeZrbU8nX83w4yh8=,iv:y8+k6prPNB0OvLJB9Hx0yo3hKU836l6pR0SBfZXQ6Es=,tag:9fguIMNzDPp0FS6LOyDwOQ==,type:str]
            github_app_installation_id: ENC[AES256_GCM,data:zoqqzzW0Q5Y=,iv:oePwLaN72UOwWfhsrlyUSUDdl4LFjoPKyVMDajehyhk=,tag:nQSIBi4qcL/aj6F+EnZcrg==,type:str]
            github_app_private_key: ENC[AES256_GCM,data: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,iv:IpeJxtVHrEwP07vsPxbNHmOhslO6JWYJKsY42Bp/1CA=,tag:1veuscAVI2tjDo1w0gbIAA==,type:str]
        githubConfigUrl: https://github.com/truecharts
        controllerServiceAccount:
            name: actions-runner-controller
            namespace: gha
        containerMode:
            type: kubernetes
            kubernetesModeWorkVolumeClaim:
                accessModes:
                    - ReadWriteOnce
                storageClassName: openebs-hostpath
                resources:
                    requests:
                        storage: 32Gi
        template:
            spec:
                containers:
                    - name: runner
                      image: tccr.io/tccr/charts-ci:latest
                      command:
                        - /home/runner/run.sh
                      env:
                        - name: ACTIONS_RUNNER_REQUIRE_JOB_CONTAINER
                          value: "false"
sops:
    shamir_threshold: 3
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1uzy27yg04slm0t4naapemy207fd7uh4lda70dxnh932e5dd8n55skgcdrq
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBmcXNFQS9MbG1jN2owN09l
            WlVlaldOcnFkRHFuK2RxQUtjOTFOMlJaK1FzCllNOWFWUndkY01CdC9UeStGa1J6
            MUJ1RU41WXlpMUJvaXV4WXNtc28yWkkKLS0tIDdmeWdhd3I1VEkwNFVOaFJpNVRK
            cUZVd0VJM0FSamQ0elNJbXVtVkNId1EKxOC3++YFJxmnQ2t1vMSOro3cLOTiE62g
            9+tUjeVKRo5IW5vN1zQGdC/f+FivQHKyvZzgb07GFjkrXOSx2oGZTA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-02-03T11:36:35Z"
    mac: ENC[AES256_GCM,data:/3DfSPOuYVI3/S1ddlhGvLtQhC4oQp4VE07I+R18xkxd3rLOS4PUfD1x8l0TpbWMPzQpdUpqkYIkNKJDP8UiJDcNpJux8eOeiwH6ozDKUI8tswQLNyDcT47szkdj66sGyqD0d3P81h5IxC9aRkMUIJsm7H0zOYNMYAmLpUL0A74=,iv:SQ+FqUuuEkeCIqDLm+bnpulg6wt3lgseqJsKQsT26gM=,tag:D3UEXi/8QCyJyC6Z+irPLQ==,type:str]
    pgp: []
    encrypted_regex: ((?i)(displayname|email|pass|ca|id|bootstraptoken|secretboxencryptionsecret|secrets|secrets|password|cert|secret($|[^N])|key|token|^data$|^stringData))
    version: 3.9.2
