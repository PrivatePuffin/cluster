# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/helm.toolkit.fluxcd.io/helmrelease_v2.json
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: actions-runners
    namespace: gha
spec:
    interval: 30m
    chart:
        spec:
            chart: gha-runner-scale-set
            version: 0.10.1
            sourceRef:
                kind: HelmRepository
                name: actions-runner-controller
                namespace: flux-system
    install:
        remediation:
            retries: 3
    upgrade:
        remediation:
            strategy: rollback
            retries: 3
    dependsOn:
        - name: actions-runner-controller
          namespace: gha
    values:
        minRunners: 6
        maxRunners: 24
        githubConfigSecret:
            github_app_id: ENC[AES256_GCM,data:oN9i4cr7Uhoh+MqrqlpV/hNY5/r5j73936dis73DH4Id0V7TL6UrJtU=,iv:qaZVKpYSgY8bJ6/Dw3PQwCoz1i47RF/LUt2NH3w+oV4=,tag:50NLAoc1x02IuoehC+b1+Q==,type:str]
            github_app_installation_id: ENC[AES256_GCM,data:0/wgJYktAyw=,iv:FT5AZDCKnVvmGjW3EOQMgPnZfHvN9ORCtalNBN/HAxY=,tag:6dGbpJGWhbxM+57laYAaGA==,type:str]
            github_app_private_key: ENC[AES256_GCM,data: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,iv:+dV8byZ9/tsMwufjTOktfQIm8nfOluB7KcZBFHXNi4I=,tag:BiWErgEb0xS1uiYaFlrlFA==,type:str]
        githubConfigUrl: https://github.com/truecharts
        controllerServiceAccount:
            name: actions-runner-controller
            namespace: gha
        containerMode:
            type: kubernetes
            kubernetesModeWorkVolumeClaim:
                accessModes:
                    - ReadWriteOnce
                storageClassName: openebs-hostpath
                resources:
                    requests:
                        storage: 32Gi
        template:
            spec:
                containers:
                    - name: runner
                      image: tccr.io/tccr/charts-ci:latest
                      command:
                        - /home/runner/run.sh
                      env:
                        - name: ACTIONS_RUNNER_REQUIRE_JOB_CONTAINER
                          value: "false"
sops:
    shamir_threshold: 3
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1uzy27yg04slm0t4naapemy207fd7uh4lda70dxnh932e5dd8n55skgcdrq
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBnOUEvbGUxdWhZL2JWc2lQ
            ZjRDSkUrNzUyVTZCZ0QwM2NxT3dyMnpZRFRZCjQxTlE3SG1ITkphWmJqTjdzWVM2
            Q1I3SnZpVjFSYUJoWkpENXc4akpuVGcKLS0tIHNVdWxuc212UDIzT3hicGltdDQx
            Sk15NDl2b0ptcTdrYXFjQUZTa0EyUmMKL6Z3U/RacV1MV8iq5LxsmXfjhh1AEWpi
            nW5uHnsRb2RaEpB0DydgXBVGmRY25ic8MFAHuVpGZrjxGXeGrf9wxg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-03-08T20:02:12Z"
    mac: ENC[AES256_GCM,data:puuZdbEFzbqE4gaDI/4td4mcrPLWSPCC16RfgZCh/Uz77+w6ukky1z9vJbPaGAHQTZdrDfc7E6vkHJJIenjCqsyaOkxaXbi/52iyFpAl4PBLyElBgeKubsHtBehbAbCyi0ne634x7iT2hgMvrpVmnKGmG7ku/EwqtlSWdORHLho=,iv:/NJ66tVGKUCKbBGD5wTSHFHqg4gzWSbYvpxVT62r164=,tag:2j15YRejkGAgWqVZD9svPw==,type:str]
    pgp: []
    encrypted_regex: ((?i)(displayname|email|pass|ca|id|bootstraptoken|secretboxencryptionsecret|secrets|secrets|password|cert|secret($|[^N])|key|token|^data$|^stringData))
    version: 3.9.2
